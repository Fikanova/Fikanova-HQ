# ============================================================================
# FIKANOVA ENVIRONMENT VARIABLES
# Copy this file to .env and fill in your actual values
# ============================================================================

# ============================================================================
# APPWRITE CONFIGURATION
# Get these from your Appwrite Console: https://cloud.appwrite.io/console
# ============================================================================

# Appwrite Cloud endpoint (use fra.cloud.appwrite.io for Frankfurt region)
APPWRITE_ENDPOINT=https://fra.cloud.appwrite.io/v1

# Same endpoint for Vite/frontend apps (prefix with VITE_ for client-side access)
VITE_APPWRITE_ENDPOINT=https://fra.cloud.appwrite.io/v1

# Your Appwrite project ID (found in Project Settings)
APPWRITE_PROJECT_ID=your-project-id-here
VITE_APPWRITE_PROJECT_ID=your-project-id-here

# Database ID (found in Databases section)
DATABASE_ID=your-database-id-here
VITE_APPWRITE_DATABASE_ID=your-database-id-here

# Server-side API Key (create in Project Settings > API Keys)
# Required permissions: databases.read, databases.write, users.read, users.write, storage.read, storage.write
APPWRITE_API_KEY=your-api-key-here

# Storage bucket for ESG reports
STORAGE_BUCKET_ID=esg-reports

# ============================================================================
# APPWRITE COLLECTION IDS
# These are created by running: node appwrite/setup_appwrite.js
# ============================================================================

# Core collections
COLLECTION_LEADS_INTAKE=lead_intakes
COLLECTION_CONTENT_DRAFTS=content_drafts
COLLECTION_CLIENT_AUDITS=client_audits
COLLECTION_TRANSACTIONS=transactions
COLLECTION_AI_RESPONSES=ai_responses

# ============================================================================
# WHATSAPP BUSINESS API (Meta Cloud API)
# Get these from Meta Business Suite: https://business.facebook.com/
# Docs: https://developers.facebook.com/docs/whatsapp/cloud-api
# ============================================================================

# WhatsApp Business Account ID
WHATSAPP_BUSINESS_ACCOUNT_ID=your-waba-id

# Phone Number ID (from WhatsApp > API Setup)
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id

# Permanent Access Token (from System Users or Meta Developer Portal)
WHATSAPP_ACCESS_TOKEN=your-permanent-access-token

# Webhook Verify Token (you create this, must match webhook config)
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# App Secret (for webhook signature verification)
WHATSAPP_APP_SECRET=your-app-secret

# Meta App ID (for Embedded Signup)
META_APP_ID=your-meta-app-id

# ============================================================================
# M-PESA (Daraja API - Safaricom)
# Get these from Daraja Portal: https://developer.safaricom.co.ke
# ============================================================================

# Environment: sandbox or production
MPESA_ENVIRONMENT=sandbox

# Consumer Key and Secret (from Daraja App)
MPESA_CONSUMER_KEY=your-consumer-key
MPESA_CONSUMER_SECRET=your-consumer-secret

# Business Shortcode (Paybill or Till Number)
MPESA_SHORTCODE=174379

# Passkey (provided by Safaricom for your shortcode)
MPESA_PASSKEY=your-passkey

# Callback URLs (must be HTTPS and publicly accessible)
MPESA_CALLBACK_URL=https://your-domain.com/api/mpesa/callback
MPESA_TIMEOUT_URL=https://your-domain.com/api/mpesa/timeout

# For B2C (optional - business to customer payments)
# MPESA_INITIATOR_NAME=your-initiator
# MPESA_SECURITY_CREDENTIAL=your-encrypted-credential

# ============================================================================
# N8N WORKFLOW AUTOMATION
# Configure webhook URLs from your n8n instance
# Self-hosted: https://your-server.com or Cloud: https://your-instance.app.n8n.cloud
# ============================================================================

# n8n base URL
N8N_BASE_URL=https://your-n8n-instance.app.n8n.cloud

# Master Orchestrator webhook (receives all inbound messages)
N8N_CEO_WEBHOOK_URL=https://your-n8n-instance.app.n8n.cloud/webhook/ceo-agent

# L2 Sub-Agent webhooks (called by Master Orchestrator via Execute Workflow)
N8N_MARKETING_LEAD_WEBHOOK=https://your-n8n-instance.app.n8n.cloud/webhook/marketing-lead
N8N_EDITOR_WEBHOOK=https://your-n8n-instance.app.n8n.cloud/webhook/editor
N8N_ACCOUNTS_WEBHOOK=https://your-n8n-instance.app.n8n.cloud/webhook/accounts
N8N_DEV_WEBHOOK=https://your-n8n-instance.app.n8n.cloud/webhook/dev
N8N_SECURITY_WEBHOOK=https://your-n8n-instance.app.n8n.cloud/webhook/security

# Workflow IDs (required for Execute Workflow nodes)
# Get these from n8n after importing workflows
N8N_WORKFLOW_ORCHESTRATOR_ID=your-orchestrator-workflow-id
N8N_WORKFLOW_MARKETING_LEAD_ID=your-marketing-lead-workflow-id
N8N_WORKFLOW_BRAND_BRIEF_ID=your-brand-brief-workflow-id
N8N_WORKFLOW_CLIENT_RECON_ID=your-client-recon-workflow-id

# ============================================================================
# HUMANLAYER (Human-in-the-Loop Approvals)
# Get API key from: https://app.humanlayer.dev
# ============================================================================

HUMANLAYER_API_KEY=your-humanlayer-api-key

# Founder's phone for HITL approvals (with country code)
FOUNDER_PHONE=+254700000000

# Approval timeout in seconds (default 5 minutes)
HITL_APPROVAL_TIMEOUT=300

# ============================================================================
# AI PROVIDER APIs
# Required for n8n workflows and AI features
# ============================================================================

# Google Gemini API (required for all AI agents)
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key

# OpenAI API (optional - for GPT-4 fallback)
# OPENAI_API_KEY=your-openai-api-key

# Anthropic Claude API (optional - for Claude fallback)
# ANTHROPIC_API_KEY=your-anthropic-api-key

# ============================================================================
# GOOGLE SERVICES
# ============================================================================

# Google Cloud Project ID (for advanced integrations)
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id

# Google Drive Integration (for knowledge base sync)
# Get from Google Cloud Console: https://console.cloud.google.com/apis/credentials
VITE_GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com

# Google Sheets ID (for CFO Ledger)
GOOGLE_SHEETS_LEDGER_ID=your-google-sheets-id

# ============================================================================
# SOZURI SMS (Fallback Authentication)
# Get from: https://sozuri.net
# ============================================================================

SOZURI_API_KEY=your-sozuri-api-key
SOZURI_SENDER_ID=FIKANOVA

# ============================================================================
# APPLICATION URLS
# ============================================================================

# Frontend URLs
WWW_URL=https://fikanova.co.ke
DASHBOARD_URL=https://dash.fikanova.co.ke
STORE_URL=https://store.fikanova.co.ke

# API/Backend URL
API_URL=https://api.fikanova.co.ke

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Node environment
NODE_ENV=development

# Session secret (generate a random 32+ character string)
SESSION_SECRET=your-super-secret-session-key-here

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:4321,http://localhost:4322,http://localhost:4323
